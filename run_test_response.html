<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>File Converter</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      .dropzone {border: 2px dashed #ced4da; border-radius: .5rem; padding: 2rem; text-align: center; transition: background .15s}
      .dropzone.dragover {background: #f8f9fa}
      .preview-img {max-width: 100%; height: auto; display:block; margin: 0.5rem auto}
      .small-muted {font-size: .9rem; color: #6c757d}
    </style>
  </head>
  <body class="bg-light">
    <nav class="navbar navbar-expand bg-white border-bottom mb-4">
      <div class="container">
        <a class="navbar-brand fw-bold" href="#">File Converter</a>
        <span class="small-muted">Quickly convert images to PDF or keep originals</span>
      </div>
    </nav>

    <main class="container">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card shadow-sm">
            <div class="card-body">
              <h2 class="card-title">Upload & Convert</h2>
              

              <form id="uploadForm" method="post" enctype="multipart/form-data">
                <div id="dropzone" class="dropzone mb-3" tabindex="0">
                  <p class="mb-1">Drag & drop a file here, or</p>
                  <button type="button" id="pickBtn" class="btn btn-sm btn-outline-primary">Choose file</button>
                  <input id="fileInput" type="file" name="file" class="d-none" required>
                  <div id="filename" class="small-muted mt-2"></div>
                </div>

                <div class="row g-2 align-items-center mb-3">
                  <div class="col">
                    <select name="format" class="form-select" aria-label="Select output format">
                      <option value="pdf">PDF</option>
                      <option value="jpg">JPG</option>
                      <option value="png">PNG</option>
                    </select>
                  </div>
                  <div class="col-auto">
                    <button id="submitBtn" type="submit" class="btn btn-primary">Upload & Convert</button>
                  </div>
                </div>
              </form>

              <div id="previewArea" class="text-center"></div>

              
                <div class="alert alert-success mt-3 d-flex justify-content-between align-items-center">
                  <div>Converted: <strong>sample_d842e92159f9453eb79546205a525f37.pdf</strong></div>
                  <a href="/download/sample_d842e92159f9453eb79546205a525f37.pdf" class="btn btn-success">Download</a>
                </div>
              

              <div class="mt-3 small-muted">Allowed: JPG, PNG, PDF. Max 16 MB.</div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="text-center text-muted py-3 small">
      Built with Bootstrap â€¢ Local development only
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const dropzone = document.getElementById('dropzone');
      const fileInput = document.getElementById('fileInput');
      const pickBtn = document.getElementById('pickBtn');
      const filenameEl = document.getElementById('filename');
      const previewArea = document.getElementById('previewArea');

      pickBtn.addEventListener('click', () => fileInput.click());
      fileInput.addEventListener('change', handleFiles);

      ['dragenter','dragover'].forEach(e => dropzone.addEventListener(e, ev => { ev.preventDefault(); ev.stopPropagation(); dropzone.classList.add('dragover'); }));
      ['dragleave','drop'].forEach(e => dropzone.addEventListener(e, ev => { ev.preventDefault(); ev.stopPropagation(); dropzone.classList.remove('dragover'); }));

      dropzone.addEventListener('drop', (e) => {
        const dt = e.dataTransfer;
        if (dt && dt.files && dt.files.length) {
          fileInput.files = dt.files;
          handleFiles();
        }
      });

      function handleFiles(){
        const f = fileInput.files[0];
        if (!f) return;
        filenameEl.textContent = f.name + ' (' + Math.round(f.size/1024) + ' KB)';
        previewArea.innerHTML = '';
        if (f.type.startsWith('image/')){
          const img = document.createElement('img');
          img.className = 'preview-img';
          img.alt = 'Preview';
          img.src = URL.createObjectURL(f);
          previewArea.appendChild(img);
        }
      }
    </script>
  </body>
</html>